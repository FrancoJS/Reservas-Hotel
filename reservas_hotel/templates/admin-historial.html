<!DOCTYPE html>
<html lang="es" data-bs-theme="light">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Historial — Admin</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
		<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
		<style>
			:root {
				--brand-primary: #0d6efd;
				--brand-secondary: #198754;
				--brand-accent: #ffc107;
				--brand-dark: #212529;
			}
			.navbar {
				background: var(--brand-dark);
			}
			.card-ghost {
				border: 1px solid rgba(0, 0, 0, 0.05);
				box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
			}
			.table-responsive {
				max-height: 62vh;
			}
			.brand-footer {
				color: #6c757d;
			}
		</style>
		<script>
			const botonCerrarSesion = () => {
				if (window.confirm('¿Esta seguro de cerrar sesion?')) {
					window.location.href = '/logout';
				}
			};
		</script>
	</head>
	<body>
		<header class="navbar navbar-dark">
			<div class="container d-flex flex-wrap justify-content-between align-items-center">
				<a class="navbar-brand" href="login.html"><i class="bi bi-grid-1x2"></i> Sistema de Reservas de Hotel</a>
				<nav class="nav nav-pills">
					<a class="nav-link active" href="#" onClick="botonCerrarSesion()">Cerrar Sesion</a>
				</nav>
			</div>
		</header>
		<main class="container py-4">
			<div class="card card-ghost">
				<div class="card-header bg-white d-flex justify-content-between align-items-center">
					<h5 class="mb-0"><i class="bi bi-clock-history me-1"></i> Historial de Actividades</h5>
					<div class="small text-body-secondary">Vista {{ nombre_usuario }}</div>
				</div>
				<div class="card-body">
					<div class="table-responsive border rounded">
						{% if historial %}
						<table class="table align-middle table-hover mb-0">
							<thead class="table-light">
								<tr>
									<th>ID</th>
									<th>Usuario</th>
									<th>Descripcion</th>
									<th>Tabla afectada</th>
									<th>Fecha</th>
								</tr>
							</thead>
							<tbody>
								{% for accion in historial %}
								<tr>
									<td>{{ accion.id }}</td>
									<td>{{ accion.usuario.nombre }}</td>
									<td>{{ accion.descripcion }}</td>
									<td>{{ accion.tabla_afectada }}</td>
									<td>{{ accion.fecha }}</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
						{% else %}
						<p>¡No se encontraron acciones registradas!</p>
						{% endif %}
					</div>
				</div>
			</div>
		</main>
	</body>
</html>
